#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <SDL/SDL.h>

// Memory map:
// 0x000 - 0x1FF - Chip 8 interpreter
// 0x050 - 0x0A0 - Build in fontset
// 0x200 - 0xFFF - Program ROM and RAM


unsigned char chip8_fontset[80] =
        {
         0xF0, 0x90, 0x90, 0x90, 0xF0, // 0
         0x20, 0x60, 0x20, 0x20, 0x70, // 1
         0xF0, 0x10, 0xF0, 0x80, 0xF0, // 2
         0xF0, 0x10, 0xF0, 0x10, 0xF0, // 3
         0x90, 0x90, 0xF0, 0x10, 0x10, // 4
         0xF0, 0x80, 0xF0, 0x10, 0xF0, // 5
         0xF0, 0x80, 0xF0, 0x90, 0xF0, // 6
         0xF0, 0x10, 0x20, 0x40, 0x40, // 7
         0xF0, 0x90, 0xF0, 0x90, 0xF0, // 8
         0xF0, 0x90, 0xF0, 0x10, 0xF0, // 9
         0xF0, 0x90, 0xF0, 0x90, 0x90, // A
         0xE0, 0x90, 0xE0, 0x90, 0xE0, // B
         0xF0, 0x80, 0x80, 0x80, 0xF0, // C
         0xE0, 0x90, 0x90, 0x90, 0xE0, // D
         0xF0, 0x80, 0xF0, 0x80, 0xF0, // E
         0xF0, 0x80, 0xF0, 0x80, 0x80  // F
        };

Chip8*
chip8_init(){
        // Load fontset into memory
        // initialize stack, registers and graphics with memset
        // Initialize pc = 0x200, sp &= 0, opcode = 0x200
        
}

void
chip8_loadRom(chip*c8, char* romPath){
        FILE* rom = fopen(romPath, "rb");
        if (rom == NULL){
                printf("Error loading game rom!");
                exit(1);
        }

        fread(c8->memory[i], MEMSIZE - 0x200, rom);
}

void
chip8_draw(Chip8* c8){
        
}

void
chip8_emulateCycle(Chip8* c8){
        
}

void chip8_processInput(SDL_Event* event){
        
}
        
